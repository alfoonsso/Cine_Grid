<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CINE GRID</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Añadir estilos personalizados para el logo de Letterboxd -->
    <style>
        .letterboxd-icon {
            display: inline-block;
            width: 1.2em;
            height: 1.2em;
            background-image: url('https://a.ltrbxd.com/logos/letterboxd-decal-dots-neg-rgb-500px.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <header>
        <div class="social-icons">
            <a href="#" id="info-icon-link" title="Información"><i class="fas fa-info-circle"></i></a>
            <a href="#" id="stats-icon-link" title="Estadísticas"><i class="fas fa-chart-bar"></i></a>
        </div>
        <div class="logo" id="logo-link" style="cursor: pointer;" title="Volver al menú principal">CINE-GRID</div>
        <div class="social-icons">
            <div class="difficulty-selector">
                <span class="difficulty-label">Dificultad:&nbsp;&nbsp;</span>
                <label for="difficulty-select" class="sr-only">Seleccionar Dificultad</label>
                <select id="difficulty-select">
                    <option value="easy">Fácil</option>
                    <option value="medium">Media</option>
                    <option value="hard">Difícil</option>
                    <option value="total">Total</option>
                </select>
            </div>
            <!-- Social links -->
            <a href="https://www.letterboxd.com/alfoonsso" target="_blank" title="Letterboxd"><span class="letterboxd-icon"></span></a>
            <a href="https://www.x.com/alfoonsso" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
        </div>
    </header>

    <!-- Start Menu -->
    <div id="start-menu" class="menu-screen">
        <h2>Selecciona un modo de juego</h2>
        <button id="start-directors-btn" class="menu-button">Modo Directores</button>
        <button id="start-geography-btn" class="menu-button">Modo Geografía</button>
        <!-- Optionally add difficulty selector here instead of header -->
    </div>

    <!-- Game Container (initially hidden) -->
    <div id="game-container" class="hidden">
        <div class="score-display">
            <div class="score-display">
                <div id="current-score-display">Puntuación actual: <span>0</span></div>
                <div id="user-max-score-display">Mejor puntuación: <span>0</span></div>
                <div id="attempts-display">Intentos restantes: <span>3</span></div>
            </div>
        </div>

        <div class="grid-container" id="grid-container">
            <!-- The grid is generated by JavaScript -->
        </div>

        <div class="usability-hint" id="usability-hint">
            <p>Haz clic en un director o categoría para más información.</p>
        </div>

        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search movie...">
            <button id="search-button"><i class="fas fa-search"></i></button>
            <div id="search-results" class="hidden"></div>
        </div>

        <!-- Modifica el div con clase "game-controls" (alrededor de la línea 83) -->
        <div class="game-controls">
            <button id="give-up-button" class="give-up-button">Rendirse</button>
            <!--<button id="share-results-button" class="share-button">Compartir Resultados</button>-->
        </div>
    </div>


    <div id="notification-container" class="notification-container"></div>

    <footer>
        <div class="footer-content">
            <p>© 2024 CINE-GRID. Desarrollado por Alfonso. Todos los derechos reservados.</p>
            <p>
                <a href="politica-cookies.html">Política de Cookies</a> |
                <a href="politica-privacidad.html">Política de Privacidad</a>
            </p>
        </div>
    </footer>

    <!-- Modales -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="confirm-modal-message">¿Estás seguro?</h2>
            <div class="button-container">
                <button id="confirm-yes" class="restart-button">Sí</button>
                <button id="confirm-no" class="reset-button">No</button>
            </div>
        </div>
    </div>
     <div id="stats-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">×</span>
            <h2>Estadísticas</h2>
            <div class="stats-container">
                <div class="stat-item">
                    <div id="stats-current-filled" class="stat-value">0/0</div>
                    <div class="stat-label">Celdas completadas</div>
                </div>
                <div class="stat-item">
                    <div id="stats-current-progress" class="stat-value">0%</div>
                    <div class="stat-label">Progreso</div>
                </div>
                 <div class="stat-item">
                    <div id="stats-current-score" class="stat-value">0</div> <!-- Added current score to stats modal -->
                    <div class="stat-label">Puntuación de la partida</div>
                </div>
                <div class="stat-item">
                    <div id="stats-current-attempts" class="stat-value">0</div>
                    <div class="stat-label">Intentos restantes</div>
                </div>
            </div>
            <div id="stats-progress-bar" class="progress-bar">
                <div class="progress" style="width: 0%"></div>
            </div>
            <div class="global-stats">
                <h3>Estadísticas globales</h3>
                <div class="stats-container">
                    <div class="stat-item">
                        <div id="stats-global-played" class="stat-value">0</div>
                        <div class="stat-label">Partidas jugadas</div>
                    </div>
                    <div class="stat-item">
                        <div id="stats-global-completed" class="stat-value">0</div>
                        <div class="stat-label">Partidas completadas</div>
                    </div>
                    <div class="stat-item">
                        <div id="stats-global-success-rate" class="stat-value">0%</div>
                        <div class="stat-label">Tasa de éxito</div>
                    </div>
                </div>
                 <!-- Add User's Best Score to global stats in modal -->
                <div class="stats-container">
                    <div class="stat-item full-width"> <!-- Use a class for potential wider item -->
                        <div id="stats-user-best-score" class="stat-value">0</div>
                        <div class="stat-label">Mejor puntuación para este modo / dificultad</div>
                    </div>
                </div>
            </div>
            <div class="button-container">
                <button id="restart-game" class="restart-button">Reiniciar partida</button>
                <button id="reset-stats" class="reset-button">Reiniciar estadísticas</button>
            </div>
        </div>
    </div>

    <div id="info-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">×</span>
            <h2><u>Acerca de CINE-GRID</u></h2>
            <p>CINE-GRID es un juego de conocimiento cinematográfico donde debes encontrar películas que cumplan con dos criterios: el director (u origen geográfico) y una característica específica.</p>
            <br>
            <h3><u>¿Cómo se juega?</u></h3>
            <ol>
                <li>Selecciona una celda de la cuadrícula.</li>
                <li>Busca una película que sea del director/origen geográfico indicado en la fila y que cumpla con el criterio de la columna.</li>
                <li>Tienes 3 intentos. Cada película incorrecta reduce tus intentos.</li>
                <li>¡Completa toda la cuadrícula para ganar!</li>
            </ol>
            <br>
             <p>Cambia entre Modo Directores y Modo Geografía usando los iconos en la cabecera. En Modo Directores, puedes seleccionar la dificultad.</p>
             <p>Tu puntuación aumenta por cada película correcta, siendo mayor para películas menos populares.</p>
             <br>
             <p>Desarrollado por Alfonso.</p>
        </div>
    </div>

    <div id="director-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">×</span>
            <h2 id="director-modal-name">Director Name</h2>
            <img id="director-modal-image" src="" alt="Director Headshot" style="width: 100%; max-width: 300px; display: block; margin: 10px auto;">
        </div>
    </div>

    <div id="category-info-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">×</span>
            <h2 id="category-info-title">Category Information</h2>
            <p id="category-info-description">Detailed description of the category will go here.</p>
        </div>
    </div>

    <div id="geography-info-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">×</span>
            <h2 id="geography-info-title">Geographical Information</h2>
            <p id="geography-info-description">Detailed description of the region/country will go here.</p>
        </div>
    </div>


    <!-- Scripts -->
    <script src="js/apiService.js" type="module"></script>
    <script src="js/main.js" type="module"></script>
</body>
</html>